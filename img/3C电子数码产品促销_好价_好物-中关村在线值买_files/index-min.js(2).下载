/*! pub 2014-09-15 15:43:53 */
KISSY.add("components/search_tm/index",function(e,t,n){var r=e.all,i=t.extend({bindUI:function(){var e=this,t=r("#J_search_hot").all("a");e.rd=new n({pid:e.get("pid"),w:e.get("w"),b:e.get("b"),unid:e.get("uid"),c:e.get("c"),pvid:e.get("pvid")}),t.each(function(t){var n=encodeURIComponent(t.html()),r="http://ai.taobao.com/search/index.htm?key="+n+"&pid="+e.get("pid")+"&tmall=true"+"&unid="+e.get("unid")+"&source_id=tdj_search",i=e.rd.getRd(r);t.attr("href",i)});var i="http://ai.taobao.com?pid="+e.get("pid")+"&unid="+e.get("unid")+"&source_id=tdj_search",a=e.rd.getRd(i);r("#J_submit_btn").attr("href",a)},_submit:function(){var t=this,n=encodeURIComponent(r("#q").val()),i="http://ai.taobao.com/search/index.htm?key="+e.trim(n)+"&pid="+t.get("pid")+"&tmall=true"+"&unid="+t.get("unid")+"&source_id=tdj_search",a=t.rd.getRd(i);r("#J_submit_btn").attr("href",a)}},{ATTRS:{w:{value:null},pid:{value:null},unid:{value:null},b:{value:null},c:{value:null},pvid:{value:null}},EVENTS:{"#q":{change:function(){var e=this;e._submit()},keypress:function(e){var t=this;if(13==e.keyCode){t._submit();var n=r("#J_submit_btn").attr("href");window.open(n)}}}}});return i},{requires:["brix/core/brick","components/gallery_rd/index"]});